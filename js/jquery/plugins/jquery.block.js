/*
 * jQuery blockUI plugin
 * Version 2.08 (06/11/2008)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * 
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */


;(function($){if(/1\.(0|1|2)\.(0|1|2)/.test($.fn.jquery)||/^1.1/.test($.fn.jquery)){alert('blockUI requires jQuery v1.2.3 or later!  You are using v'+$.fn.jquery);return}$.blockUI=function(a){install(window,a)};$.unblockUI=function(a){remove(window,a)};$.fn.block=function(a){return this.each(function(){if($.css(this,'position')=='static')this.style.position='relative';if($.browser.msie)this.style.zoom=1;install(this,a)})};$.fn.unblock=function(a){return this.each(function(){remove(this,a)})};$.blockUI.version=2.08;$.blockUI.defaults={message:'<h1>Please wait...</h1>',css:{padding:0,margin:0,width:'30%',top:'40%',left:'35%',textAlign:'center',color:'#000',border:'3px solid #aaa',backgroundColor:'#fff',cursor:'wait'},overlayCSS:{backgroundColor:'#000',opacity:'0.6'},baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,constrainTabKey:true,fadeOut:400,focusInput:true,applyPlatformOpacityRules:true,onUnblock:null};var q=$.browser.msie&&/MSIE 6.0/.test(navigator.userAgent);var r=null;var u=[];function install(a,b){var c=(a==window);var d=b&&b.message!==undefined?b.message:undefined;b=$.extend({},$.blockUI.defaults,b||{});b.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,b.overlayCSS||{});var e=$.extend({},$.blockUI.defaults.css,b.css||{});d=d===undefined?b.message:d;if(c&&r)remove(window,{fadeOut:0});if(d&&typeof d!='string'&&(d.parentNode||d.jquery)){var f=d.jquery?d[0]:d;var g={};$(a).data('blockUI.history',g);g.el=f;g.parent=f.parentNode;g.display=f.style.display;g.position=f.style.position;g.parent.removeChild(f)}var z=b.baseZ;var h=($.browser.msie)?$('<iframe class="blockUI" style="z-index:'+z++ +';border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="javascript:false;"></iframe>'):$('<div class="blockUI" style="display:none"></div>');var j=$('<div class="blockUI" style="z-index:'+z++ +';cursor:wait;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var k=c?$('<div class="blockUI blockMsg blockPage" style="z-index:'+z+';position:fixed"></div>'):$('<div class="blockUI blockMsg blockElement" style="z-index:'+z+';display:none;position:absolute"></div>');if(d)k.css(e);if(!b.applyPlatformOpacityRules||!($.browser.mozilla&&/Linux/.test(navigator.platform)))j.css(b.overlayCSS);j.css('position',c?'fixed':'absolute');if($.browser.msie)h.css('opacity','0.0');$([h[0],j[0],k[0]]).appendTo(c?'body':a);var m=$.browser.msie&&(!$.boxModel||$('object,embed',c?null:a).length>0);if(q||m){if(c&&b.allowBodyStretch&&$.boxModel)$('html,body').css('height','100%');if((q||!$.boxModel)&&!c){var t=sz(a,'borderTopWidth'),l=sz(a,'borderLeftWidth');var n=t?'(0 - '+t+')':0;var p=l?'(0 - '+l+')':0}$.each([h,j,k],function(i,o){var s=o[0].style;s.position='absolute';if(i<2){c?s.setExpression('height','document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + "px"'):s.setExpression('height','this.parentNode.offsetHeight + "px"');c?s.setExpression('width','jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):s.setExpression('width','this.parentNode.offsetWidth + "px"');if(p)s.setExpression('left',p);if(n)s.setExpression('top',n)}else if(b.centerY){if(c)s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');s.marginTop=0}})}k.append(d).show();if(d&&(d.jquery||d.nodeType))$(d).show();bind(1,a,b);if(c){r=k[0];u=$(':input:enabled:visible',r);if(b.focusInput)setTimeout(focus,20)}else center(k[0],b.centerX,b.centerY)};function remove(a,b){var c=a==window;var d=$(a).data('blockUI.history');b=$.extend({},$.blockUI.defaults,b||{});bind(0,a,b);var e=c?$('body').children().filter('.blockUI'):$('.blockUI',a);if(c)r=u=null;if(b.fadeOut){e.fadeOut(b.fadeOut);setTimeout(function(){reset(e,d,b,a)},b.fadeOut)}else reset(e,d,b,a)};function reset(a,b,c,d){a.each(function(i,o){if(this.parentNode)this.parentNode.removeChild(this)});if(b&&b.el){b.el.style.display=b.display;b.el.style.position=b.position;b.parent.appendChild(b.el);$(b.el).removeData('blockUI.history')}if(typeof c.onUnblock=='function')c.onUnblock(d,c)};function bind(b,a,c){var d=a==window,$el=$(a);if(!b&&(d&&!r||!d&&!$el.data('blockUI.isBlocked')))return;if(!d)$el.data('blockUI.isBlocked',b);var e='mousedown mouseup keydown keypress click';b?$(document).bind(e,c,handler):$(document).unbind(e,handler)};function handler(e){if(e.keyCode&&e.keyCode==9){if(r&&e.data.constrainTabKey){var a=u;var b=!e.shiftKey&&e.target==a[a.length-1];var c=e.shiftKey&&e.target==a[0];if(b||c){setTimeout(function(){focus(c)},10);return false}}}if($(e.target).parents('div.blockMsg').length>0)return true;return $(e.target).parents().children().filter('div.blockUI').length==0};function focus(a){if(!u)return;var e=u[a===true?u.length-1:0];if(e)e.focus()};function center(a,x,y){var p=a.parentNode,s=a.style;var l=((p.offsetWidth-a.offsetWidth)/2)-sz(p,'borderLeftWidth');var t=((p.offsetHeight-a.offsetHeight)/2)-sz(p,'borderTopWidth');if(x)s.left=l>0?(l+'px'):'0';if(y)s.top=t>0?(t+'px'):'0'};function sz(a,p){return parseInt($.css(a,p))||0}})(jQuery);
